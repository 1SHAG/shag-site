<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>SHAG Snake üêç</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background: radial-gradient(circle at top, #111827 0%, #020617 55%, #000 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #fff;
            font-family: Arial, sans-serif;
            flex-direction: column;
            margin: 0;
        }
        h1 {
            margin: 5px 0 0;
            font-size: 26px;
            letter-spacing: 1px;
        }
        #shagLogo {
            width: 32px;
            vertical-align: middle;
            margin-right: 6px;
            border-radius: 50%;
        }
        #score {
            font-size: 20px;
            margin: 8px 0 10px;
            color: #00f0ff;
            text-shadow: 0 0 10px #00c8ff;
        }
        button {
            padding: 8px 18px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(90deg, #00c8ff, #00f6b4);
            color: #000;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
            box-shadow: 0 0 15px rgba(0, 200, 255, 0.8);
        }
        button:hover {
            transform: translateY(-1px);
        }
        canvas {
            background: #020617;
            border: 3px solid #00c8ff;
            box-shadow: 0 0 25px #00c8ff;
            max-width: 95vw;
            max-height: 70vh;
        }
        .controls {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 8px;
            text-align: center;
        }
    </style>
</head>
<body>

<h1>
    <img id="shagLogo" src="https://raw.githubusercontent.com/1SHAG/shag-site/main/assets/1shag/1SHAG_logo_512.png" alt="SHAG">
    SHAG Snake
</h1>

<div id="score">–û—á–∫–∏: 0 SHAG</div>

<button onclick="startGame()">–°—Ç–∞—Ä—Ç –≥—Ä–∏</button>

<canvas id="game" width="400" height="400"></canvas>

<div class="controls">
    –ö–µ—Ä—É–≤–∞–Ω–Ω—è: —Å—Ç—Ä—ñ–ª–∫–∏ ‚¨Ö‚¨Ü‚û°‚¨á –∞–±–æ W A S D<br>
    –ó–±–∏—Ä–∞–π –ª–æ–≥–æ—Ç–∏–ø–∏ SHAG, —â–æ–± –∑–∞—Ä–æ–±–ª—è—Ç–∏ SHAG –æ—á–∫–∏!
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const grid = 20;
let snake = [];
let direction = "right";
let food = {};
let score = 0;
let gameLoop = null;

// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –ª–æ–≥–æ—Ç–∏–ø SHAG –æ–¥–∏–Ω —Ä–∞–∑
const foodImg = new Image();
foodImg.src = "https://raw.githubusercontent.com/1SHAG/shag-site/main/assets/1shag/1SHAG_logo_512.png";

function startGame() {
    snake = [{x: 200, y: 200}];
    direction = "right";
    score = 0;
    document.getElementById("score").textContent = "–û—á–∫–∏: 0 SHAG";

    spawnFood();

    if (gameLoop) {
        clearInterval(gameLoop);
    }
    gameLoop = setInterval(update, 120);
}

function spawnFood() {
    food = {
        x: Math.floor(Math.random() * (canvas.width / grid)) * grid,
        y: Math.floor(Math.random() * (canvas.height / grid)) * grid
    };
}

// –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∑ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
document.addEventListener("keydown", event => {
    const key = event.key;

    if ((key === "ArrowUp" || key === "w" || key === "W") && direction !== "down") {
        direction = "up";
    } else if ((key === "ArrowDown" || key === "s" || key === "S") && direction !== "up") {
        direction = "down";
    } else if ((key === "ArrowLeft" || key === "a" || key === "A") && direction !== "right") {
        direction = "left";
    } else if ((key === "ArrowRight" || key === "d" || key === "D") && direction !== "left") {
        direction = "right";
    }
});

function update() {
    let head = {...snake[0]};

    if (direction === "up") head.y -= grid;
    if (direction === "down") head.y += grid;
    if (direction === "left") head.x -= grid;
    if (direction === "right") head.x += grid;

    // –í–∏—Ö—ñ–¥ –∑–∞ –º–µ–∂—ñ ‚Äî –∑'—è–≤–ª—è—î–º–æ—Å—å –∑ —ñ–Ω—à–æ–≥–æ –±–æ–∫—É
    if (head.x < 0) head.x = canvas.width - grid;
    if (head.x >= canvas.width) head.x = 0;
    if (head.y < 0) head.y = canvas.height - grid;
    if (head.y >= canvas.height) head.y = 0;

    snake.unshift(head);

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ "—ó–∂—É"
    if (head.x === food.x && head.y === food.y) {
        score++;
        document.getElementById("score").textContent = "–û—á–∫–∏: " + score + " SHAG";
        spawnFood();
    } else {
        snake.pop();
    }

    // –°–∞–º–æ–≤—Ä—ñ–∑–∞–Ω–Ω—è
    for (let i = 1; i < snake.length; i++) {
        if (head.x === snake[i].x && head.y === snake[i].y) {
            alert("–ö—ñ–Ω–µ—Ü—å –≥—Ä–∏! –¢–∏ –∑–∞—Ä–æ–±–∏–≤ " + score + " SHAG!");
            startGame();
            return;
        }
    }

    draw();
}

function draw() {
    // —Ñ–æ–Ω
    ctx.fillStyle = "#020617";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // –ó–º—ñ–π–∫–∞
    for (let i = 0; i < snake.length; i++) {
        ctx.fillStyle = i === 0 ? "#00f0ff" : "#00c8ff";
        ctx.fillRect(snake[i].x, snake[i].y, grid - 1, grid - 1);
    }

    // –á–∂–∞ ‚Äî –ª–æ–≥–æ—Ç–∏–ø SHAG
    if (foodImg.complete) {
        ctx.drawImage(foodImg, food.x, food.y, grid, grid);
    } else {
        // —è–∫—â–æ —â–µ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–æ—Å—å ‚Äî –º–∞–ª—é—î–º–æ —Å–≤—ñ—Ç–ª—É –∫–ª—ñ—Ç–∏–Ω–∫—É
        ctx.fillStyle = "#facc15";
        ctx.fillRect(food.x, food.y, grid - 1, grid - 1);
    }
}
</script>

</body>
</html>
